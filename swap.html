<!DOCTYPE html>
<meta charset="utf-8">
<body style="background:black">
  <div id="content"></div>
</body>
<script src="d3js.org/d3.v3.min.js"></script>
<script>
/// <reference path="Scripts/typings/d3/d3.d.ts" />
// javascript style declarations:
var chart = {
    width: 960,
    height: 500,
    margins: { x: 300, y: 50 }
};
var bar = {
    width: 55,
    height: 65,
    spacing: 20
};
// animation properties
var animation = {
    duration: 400,
    pauseDuration: 400
};
// simple data to visualize
var Datum = (function () {
    function Datum() {
    }
    return Datum;
})();
var data = [
    { value: 4, range: 1, angle: 45, color: '#377eb8', width: 1 },
    { value: 4, range: 1, angle: 45, color: '#4daf4a', width: 0.6 },
    { value: 4, range: 1, angle: 45, color: '#ff7f00', width: 0.8 },
    { value: 4, range: 1, angle: 45, color: '#e41a1c', width: 0.4 },
    { value: 4, range: 1, angle: 45, color: '#984ea3', width: 0.9 },
    { value: 4, range: 1, angle: 45, color: '#f781bf', width: 0.7 }
];
// apply settings for the rectangles
// lose type safety and code completion here because Selection and Transition are incompatible (grrr!)
function render(selection) {
    selection.attr('width', function (d, i) { return d.width * bar.width; }).attr('height', function (d, i) { return d.range * bar.height; }).attr('fill', function (d, i) { return d.color; }).attr('transform', function (d, i) { return 'translate(' + [chart.margins.x + i * (bar.width + bar.spacing), -chart.margins.y + chart.height - d.value * bar.height] + ') ' + 'rotate(' + [(d.angle)] + ')' + 'translate(' + [-bar.width / 2, -d.range / 2] + ')'; });
}
window.onload = function () {
    // make the svg
    var svg = d3.select('#content').append('svg');
    svg.attr('width', chart.width).attr('height', chart.height).style('background', 'white');
    // initialize rectangles
    var rects = svg.selectAll('rect').data(data).enter().append('rect');
    render(rects);
    // start timer
    i=0;
    j=1;
    setInterval(function () {
        data = swap(i,j,data);
        // apply the data to the rectangles
        var rects = svg.selectAll('rect').data(data);
        // create rectangles that were added
        render(rects.enter().append('rect'));
        // update rectangles that changed
        render(rects.transition().duration(animation.duration));
        // remove deleted rectangles
        rects.exit().remove();
        i=(i+1)%data.length;
        j=(j+1)%data.length;
    }, animation.duration + animation.pauseDuration);
};

var n = 5,
array = d3.range(n)
arrays = [array.slice()],
n = array.length;
var i=0, j=n-1;
while(i <= n-1 && j >= 0){
  swap(i, j, array);
  arrays.push(array.slice());
  i++;
  j--;
}

const svg = d3.create('svg').attr('viewBox',[0,0,200,200]);

svg.append("circle")
.attr('c','50%')
.attr('cy','50%')
.attr('r',20)
.style('fill','green');

svg.node();

function swap(i, j, array) {
  temp = array[i]
  array[i] = array[j]
  array[j] = temp
  return array;
}

</script>